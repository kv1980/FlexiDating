<!DOCTYPE html>

<html style="height: 950px; width: 1520px;">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/flexidating.css" rel="stylesheet">
    <link href="css/profileVerandering.css" rel="stylesheet">
    <title>FlexiDating - Registratie</title>
</head>
<body>
    <section class="Header">
        <div class="Rij">
            <div class="Kol8">
		<img src="img/Flexi.png" class="banner" alt="Flexi logo">
            </div>
            <div class="Kol4">
                <p class="HeaderNickName">Welkom</p>
                <a class="HeaderLinks" id="annulerenLink" href="flexidating.html">Annuleren</a>
            </div>
        </div>
    </section>
    <section>
        <div class="ProfielTitel">
            <h2>UW PROFIEL</h2>
            <p>Registratie bij FlexiDating: vul hieronder uw gegevens in en uw veroveringstocht kan beginnen!</p>
            <em>
                * = Verplicht veld
            </em>
        </div>
        <form class="Profiel">
            <div class="Rij">
                <div class="Kol6" style="margin-left:355px">
                    <table>
                        <tr>
                            <th><label for="email">Email*:</label></th>
                            <td><input type="email" id="email" name="email" placeholder="uw emailadres" class="fieldRequired" required></td>
                        </tr>
                        <tr>
                            <th><label for ="wachtwoord">Wachtwoord*:</label></th>
                            <td><input type="password" id="wachtwoord" name="wachtwoord" class="fieldRequired" placeholder="uw wachtwoord" required></td>
                        </tr>
                        <tr>
                            <th><label for ="familienaam">Familienaam*:</label></th>
                            <td><input type ="text" id="familienaam" name="familienaam" class="fieldRequired" required placeholder="uw familienaam"></td>
                        </tr>
                        <tr>
                            <th><label for = "voornaam">Voornaam*:</label></th>
                            <td><input type ="text" id="voornaam" name="voornaam" class="fieldRequired" required placeholder="uw voornaam"></td>
                        </tr>
                        <tr>
                            <th><label for = "geboortedatum">Geboortedatum*:</label></th>
                            <td><input type ="date" id="geboortedatum" name=geboortedatum class="fieldRequired" required></td>
                        </tr>
                        <tr>
                            <th><label for="foto">Foto:</label></th>
                            <td><input type="text" id="foto" name="foto" placeholder="fotonaam"></td>
                        </tr>
                        <tr>
                            <th><label for ="nickname">Nickname*:</label></th>
                            <td><input type="text" id="nickname" name="nickname" class="fieldRequired" placeholder="uw nickname" required></td>
                        </tr>
                    </table>
                </div>
                <div class="Kol6">
                    <table>
                        <tr>
                            <th><label for ="haarkleur">Haarkleur:</label></th>
                            <td><select name="haarkleur" id="haarkleur"></select></td>
                        </tr>
                        <tr>
                            <th><label for ="oogkleur">Oogkleur:</label></th>
                            <td><select name="oogkleur" id="oogkleur"></select></td>
                        </tr>
                        <tr>
                            <th><label for ="gewicht">Gewicht:</label></th>
                            <td><input type="number" id="gewicht" name="gewicht"> kg</td>
                        </tr>
                        <tr>
                            <th><label for ="grootte">Grootte:</label></th>
                            <td><input type="number" id="grootte" name="grootte"> cm</td>
                        </tr>
                        <tr>
                            <th><label for ="beroep">Beroep:</label></th>
                            <td><input type="text" id="beroep" name="beroep" placeholder="uw beroep"></td>
                        </tr>
                        <tr>
                            <th><label for ="sexe">Geslacht:</label></th>
                            <td><input type = "radio" id="sexem" name="sexe" value="m">Man
                                <input type = "radio" id="sexev" name="sexe" value="v">Vrouw</td>
                        </tr>
                        <tr>
                            <th><label for ="seksvoorkeur">Geaardheid:</label></th>
                            <td><input type = "radio" id="seksvoorkeur" name="seksvoorkeur" value="homo">Homo
                                <input type = "radio" id="seksvoorkeur" name="seksvoorkeur" value="hetero">Hetero
                                <input type = "radio" id="seksvoorkeur" name="seksvoorkeur" value="bi">Bi</td>
                        </tr>
                    </table>
                </div>
            </div>
        </form>
        <div class="Rij">
                <div class="knoppen">
                    <input type="button" id="bewaren" name="bewaren" value="Gegevens Opslaan">
                    <input type="reset" id="wissen" name="wissen" value="Reset">
                </div>
        </div>
    </section>
    <footer class="Footer">
        <a id="footer_add" target="_blank" href="http://www.bol.com"><img src="img/bol.jpg" alt="advertentie"></a>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script async src="js/flexi_dating.min.js"></script>
    <script src ="js/kleurenHaren.json" type="text/javascript"></script>
    <script src ="js/kleurenOgen.json" type="text/javascript"></script>
    <script type="text/javascript">
            window.onload = function () {
                vulSelectIn("haarkleur",jsonKleurenHaren);
                vulSelectIn("oogkleur",jsonKleurenOgen);
                console.log(scrumlib.getAllProfiles());
                var eSubmit = document.getElementById("bewaren");
                eSubmit.addEventListener("click",function(){
                var foutmelding = maakFoutMelding();
                if (foutmelding==""){
                    var oProfiel = {
                        "familienaam" : document.getElementById("familienaam").value,
                        "voornaam" : document.getElementById("voornaam").value,
                        "geboortedatum" : document.getElementById("geboortedatum").value,
                        "email" : document.getElementById("email").value,
                        "nickname" : document.getElementById("nickname").value,
                        "beroep" : document.getElementById("beroep").value,
                        "wachtwoord" : document.getElementById("wachtwoord").value,
                        "sexe" : radioButton("sexe"),
                        "seksvoorkeur" : radioButton("seksvoorkeur"),
                        "haarkleur" : document.getElementById("haarkleur").value,
                        "oogkleur" : document.getElementById("oogkleur").value,
                        "gewicht" : document.getElementById("gewicht").value,
                        "grootte" : document.getElementById("grootte").value,
                        "foto" : document.getElementById("foto").value
                    }; 
                    scrumlib.createProfile(oProfiel);
                    scrumlib.save();
                    location.href = "core.html";
                }
                else {
                    alert(foutmelding);
                }
                console.log(scrumlib.getAllProfiles());
                });
            }; 

            function vulSelectIn(selectID,jsonID){
                var aKleuren = JSON.parse(jsonID);
                var eSelectKleuren = document.getElementById(selectID);
                for (var i = 0; i < aKleuren.length; i++) {
                    var eOption = document.createElement('option');
                    eOption.innerHTML = aKleuren[i];
                    eOption.value = aKleuren[i];
                    eSelectKleuren.appendChild(eOption);
                };
            };

            function radioButton(el){
                var eSexe = document.getElementsByName(el);
                var sSexe = undefined;
                for (var i =0;i<eSexe.length;i++) {
                    if (eSexe[i].checked) {
                        sSexe = eSexe[i].value;
                    };
                };
                return sSexe;
            }; 

            function maakFoutMelding() {
                var foutmelding = "";
                var eInputs = document.getElementsByClassName("fieldRequired");
                for (var i = 0; i<eInputs.length; i++){
                    console.log(i);
                    if (eInputs[i].value == ""){
                        foutmelding = "Niet alle verplichte velden werden ingevuld.";
                    }
                };
                var sGeboortedatum = document.getElementById("geboortedatum").value;
                console.log(berekenLeeftijd(sGeboortedatum));
                if (berekenLeeftijd(sGeboortedatum)<18){
                    foutmelding = "U moet ouder zijn dan 18 jaar.";
                }
                return foutmelding;
            };

            function berekenLeeftijd(sGeboortedatum){
                var aGeboortedatum = sGeboortedatum.split("-");
                var dGeboortedatum = new Date(aGeboortedatum[0],aGeboortedatum[1]-1,aGeboortedatum[2]);
                var leeftijdMs = Date.now() - dGeboortedatum.getTime();
                var leeftijdDate = new Date(leeftijdMs);
                var leeftijd = Math.abs(leeftijdDate.getUTCFullYear()-1970);
                return leeftijd;
            }
        </script>
    </body>
</html>