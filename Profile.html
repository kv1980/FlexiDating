<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/Profile.css" rel="stylesheet">
        <title>FlexiDating</title>
    </head>
    <body>
        <div class="header">
            <div class="headerLinks">
                <img src="img/Flexi.png" class="banner" alt="Flexi logo">
            </div>
            <div class="headerRechts">
                <p class="headerNickName">Welkom</p>
            </div>
        </div>
        <div class="titel">
            <h2>Uw profiel</h2>
            <p>Geen lange inschrijving bij FlexiDating: vul hieronder uw profiel in en uw veroveringstoch kan beginnen!</p>
            <em>
                * = verplicht veld
            </em>
        </div>
        <form>
            <div class="linkerkolom">
                <p>
                    <label for ="familienaam">familienaam*: </label>
                    <input type ="text" id="familienaam" name="familienaam" class="fieldRequired" required placeholder="uw familienaam">
                </p>
                <p>
                    <label for = "voornaam">voornaam*: </label>
                    <input type ="text" id="voornaam" name="voornaam" class="fieldRequired" required placeholder="uw voornaam">  
                </p>
                <p>
                    <label for = "geboortedatum">geboortedatum*: </label>
                    <input type ="date" id="geboortedatum" name=geboortedatum class="fieldRequired" required >  
                </p>
                <p>
                    <label for="email">email*:</label>
                    <input type="email" id="email" name="email" placeholder="uw emailadres" class="fieldRequired" required >
                </p>
                <p>
                    <label for ="wachtwoord">wachtwoord*:</label>
                    <input type="text" id="wachtwoord" name="wachtwoord" class="fieldRequired" placeholder="uw wachtwoord" required >
                </p> 
                <p>
                    <label for ="nickname">nickname*:</label>
                    <input type="text" id="nickname" name="nickname" class="fieldRequired" placeholder="uw nickname" required >
                </p>
                 <p>
                    <label for ="beroep">beroep:</label>
                    <input type="text" id="beroep" name="beroep" placeholder="uw beroep">
                </p>   
            </div>
            <div class="rechterkolom">
                <p>
                    <label for ="haarkleur">haarkleur:</label>
                    <select name="haarkleur" id="haarkleur">  
                    </select>
                </p>
                <p>
                    <label for ="oogkleur">oogkleur:</label>
                    <select name="oogkleur" id="oogkleur">
                    </select>
                </p>
                <p>
                    <label for ="gewicht">gewicht:</label>
                    <input type="number" id="gewicht" name="gewicht"> kg
                </p>  
                <p>
                    <label for ="grootte">grootte:</label>
                    <input type="number" id="grootte" name="grootte"> cm
                </p> 
                <p>
                    <label for="foto">foto: </label>
                    <input type="text" id="foto" name="foto" placeholder="fotonaam">
                </p>
                <p>
                    <label for ="sexe">sexe:</label>
                    <input type = "radio" id="sexem" name="sexe" value="m">Man
                    <input type = "radio" id="sexev" name="sexe" value="v">Vrouw
                </p>
                <p>
                    <label for ="seksvoorkeur">seksvoorkeur:</label>
                    <input type = "radio" id="seksvoorkeur" name="seksvoorkeur" value="homo">Homo
                    <input type = "radio" id="seksvoorkeur" name="seksvoorkeur" value="hetero">Hetero
                    <input type = "radio" id="seksvoorkeur" name="seksvoorkeur" value="bi">Bi
                </p>
            </div>
            <div class="knoppen">
                <input type="button" id="bewaren" name="bewaren" value="Bewaar dit wondermooi profiel">
                <input type="reset" id="wissen" name="wissen" value="Oeps foutje">
            </div>
        </form>  
        <footer>
            <a target="_blank" href="http://www.bol.com"><img src="img/bol.jpg" alt="advertentie"></a>
        </footer>   
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <script async src="js/flexi_dating.min.js"></script>

        <script src ="js/kleurenHaren.json" type="text/javascript"></script>
        <script src ="js/kleurenOgen.json" type="text/javascript"></script>
        <script type="text/javascript">
            window.onload = function () {
                vulSelectIn("haarkleur",jsonKleurenHaren);
                vulSelectIn("oogkleur",jsonKleurenOgen);
                console.log(scrumlib.getAllProfiles());
                var eSubmit = document.getElementById("bewaren");
                eSubmit.addEventListener("click",function(){
                var foutmelding = maakFoutMelding();
                if (foutmelding==""){
                    var oProfiel = {
                        "familienaam" : document.getElementById("familienaam").value,
                        "voornaam" : document.getElementById("voornaam").value,
                        "geboortedatum" : document.getElementById("geboortedatum").value,
                        "email" : document.getElementById("email").value,
                        "nickname" : document.getElementById("nickname").value,
                        "beroep" : document.getElementById("beroep").value,
                        "wachtwoord" : document.getElementById("wachtwoord").value,
                        "sexe" : radioButton("sexe"),
                        "seksvoorkeur" : radioButton("seksvoorkeur"),
                        "haarkleur" : document.getElementById("haarkleur").value,
                        "oogkleur" : document.getElementById("oogkleur").value,
                        "gewicht" : document.getElementById("gewicht").value,
                        "grootte" : document.getElementById("grootte").value,
                        "foto" : document.getElementById("foto").value
                    }; 
                    scrumlib.createProfile(oProfiel);
                    scrumlib.save();
                    location.href = "core.html";
                }
                else {
                    alert(foutmelding);
                }
                console.log(scrumlib.getAllProfiles());
                });
            }; 

            function vulSelectIn(selectID,jsonID){
                var aKleuren = JSON.parse(jsonID);
                var eSelectKleuren = document.getElementById(selectID);
                for (var i = 0; i < aKleuren.length; i++) {
                    var eOption = document.createElement('option');
                    eOption.innerHTML = aKleuren[i];
                    eOption.value = aKleuren[i];
                    eSelectKleuren.appendChild(eOption);
                };
            };

            function radioButton(el){
                var eSexe = document.getElementsByName(el);
                var sSexe = undefined;
                for (var i =0;i<eSexe.length;i++) {
                    if (eSexe[i].checked) {
                        sSexe = eSexe[i].value;
                    };
                };
                return sSexe;
            }; 

            function maakFoutMelding() {
                var foutmelding = "";
                var eInputs = document.getElementsByClassName("fieldRequired");
                for (var i = 0; i<eInputs.length; i++){
                    console.log(i);
                    if (eInputs[i].value == ""){
                        foutmelding = "Niet alle verplichte velden werden ingevuld.";
                    }
                };
                var sGeboortedatum = document.getElementById("geboortedatum").value;
                console.log(berekenLeeftijd(sGeboortedatum));
                if (berekenLeeftijd(sGeboortedatum)<18){
                    foutmelding = "U moet ouder zijn dan 18 jaar.";
                }
                return foutmelding;
            };

            function berekenLeeftijd(sGeboortedatum){
                var aGeboortedatum = sGeboortedatum.split("-");
                var dGeboortedatum = new Date(aGeboortedatum[0],aGeboortedatum[1]-1,aGeboortedatum[2]);
                var leeftijdMs = Date.now() - dGeboortedatum.getTime();
                var leeftijdDate = new Date(leeftijdMs);
                var leeftijd = Math.abs(leeftijdDate.getUTCFullYear()-1970);
                return leeftijd;
            }
        </script>
    </body>
</html>